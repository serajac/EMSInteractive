<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardiovascular Emergencies - Interactive Learning</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.6s ease-out;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .animate-bounce {
            animation: bounce 1s infinite;
        }
        .hover\:scale-102:hover {
            transform: scale(1.02);
        }
        .hover\:scale-105:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple icon components
        const Heart = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const Brain = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"></path>
                <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"></path>
            </svg>
        );

        const BookOpen = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
            </svg>
        );

        const Gamepad2 = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="6" y1="11" x2="10" y2="11"></line>
                <line x1="8" y1="9" x2="8" y2="13"></line>
                <line x1="15" y1="12" x2="15.01" y2="12"></line>
                <line x1="18" y1="10" x2="18.01" y2="10"></line>
                <path d="M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z"></path>
            </svg>
        );

        const Zap = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
            </svg>
        );

        const Trophy = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                <path d="M4 22h16"></path>
                <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
            </svg>
        );

        const Star = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        );

        const CheckCircle = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                <polyline points="22 4 12 14.01 9 11.01"></polyline>
            </svg>
        );

        const XCircle = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
        );

        const RefreshCw = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
        );

        const Play = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
        );

        const Award = ({ className, size }) => (
            <svg className={className} width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="8" r="7"></circle>
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
            </svg>
        );

        const CardiovascularLearning = () => {
            const [currentMode, setCurrentMode] = useState('menu');
            const [score, setScore] = useState(0);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [showFeedback, setShowFeedback] = useState(false);
            const [gameScore, setGameScore] = useState({ correct: 0, total: 0 });
            const [currentCard, setCurrentCard] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);
            const [animationPlay, setAnimationPlay] = useState(false);

            // Quiz questions
            const quizQuestions = [
                {
                    question: "What is the normal intrinsic rate of the SA node?",
                    options: ["40-60 beats/min", "60-100 beats/min", "100-120 beats/min", "120-150 beats/min"],
                    correct: 1,
                    explanation: "The sinoatrial (SA) node, the heart's natural pacemaker, has an intrinsic rate of 60-100 beats/min."
                },
                {
                    question: "Which artery supplies blood to most of the left ventricle?",
                    options: ["Right coronary artery", "Left anterior descending artery", "Circumflex artery", "Posterior descending artery"],
                    correct: 1,
                    explanation: "The left anterior descending (LAD) artery supplies blood to most of the left ventricle and the interventricular septum."
                },
                {
                    question: "What does the cardiac output equation equal?",
                    options: ["Heart rate ÷ Stroke volume", "Stroke volume × Heart rate", "Preload + Afterload", "Blood pressure × Heart rate"],
                    correct: 1,
                    explanation: "Cardiac output = Stroke volume × Heart rate. This represents the amount of blood pumped through the circulatory system in 1 minute."
                },
                {
                    question: "What is the primary difference between angina and AMI pain?",
                    options: ["Location of pain", "Intensity of pain", "Duration and relief with rest/NTG", "Type of sensation"],
                    correct: 2,
                    explanation: "AMI pain can occur at any time, lasts 30 minutes to several hours, and may not be relieved by rest or NTG, unlike angina which is brief and resolves with rest."
                },
                {
                    question: "What is the most common symptom of an AMI?",
                    options: ["Shortness of breath", "Nausea", "Chest pain", "Dizziness"],
                    correct: 2,
                    explanation: "Chest pain is the most common symptom of an acute myocardial infarction, though some patients may have atypical presentations."
                },
                {
                    question: "What blood pressure reading defines a hypertensive emergency?",
                    options: ["Systolic > 140 mm Hg", "Diastolic > 90 mm Hg", "Systolic > 180 mm Hg or Diastolic ≥ 120 mm Hg", "Systolic > 200 mm Hg"],
                    correct: 2,
                    explanation: "Hypertensive emergencies occur with systolic pressure > 180 mm Hg, rapid increase in systolic pressure, or diastolic pressure ≥ 120 mm Hg."
                },
                {
                    question: "What is the first link in the chain of survival?",
                    options: ["Immediate CPR", "Rapid defibrillation", "Recognition of early warning signs and EMS activation", "Advanced life support"],
                    correct: 2,
                    explanation: "Recognition of early warning signs and immediate activation of EMS is the first critical link in the chain of survival."
                },
                {
                    question: "What does preload refer to?",
                    options: ["Pressure in the aorta", "Amount of blood returned to the heart", "Force of ventricular contraction", "Heart rate"],
                    correct: 1,
                    explanation: "Preload is the amount of blood returned to the heart to be pumped out, directly affecting cardiac output."
                },
                {
                    question: "What is the primary cause of cardiogenic shock?",
                    options: ["Dehydration", "Myocardial infarction", "Blood loss", "Allergic reaction"],
                    correct: 1,
                    explanation: "Cardiogenic shock is often caused by myocardial infarction, where the heart lacks enough power to pump adequate blood volume."
                },
                {
                    question: "What should you do if the AED advises 'no shock advised'?",
                    options: ["Check for pulse immediately", "Continue CPR for 2 minutes", "Turn off AED", "Transport immediately"],
                    correct: 1,
                    explanation: "If no shock is advised, continue CPR for 2 minutes (5 cycles) before rechecking or reanalyzing the rhythm."
                },
                {
                    question: "What is orthopnea?",
                    options: ["Difficulty breathing when lying flat", "Rapid breathing", "Chest pain", "Irregular heartbeat"],
                    correct: 0,
                    explanation: "Orthopnea is difficulty breathing when lying flat, commonly seen in heart failure patients."
                },
                {
                    question: "What is the correct compression rate for CPR?",
                    options: ["80-100/min", "100-120/min", "120-140/min", "60-100/min"],
                    correct: 1,
                    explanation: "CPR compressions should be delivered at a rate of 100-120 per minute with full chest recoil between compressions."
                }
            ];

            // Flashcards
            const flashcards = [
                { front: "Myocardium", back: "The muscular tissue of the heart responsible for pumping blood" },
                { front: "Pericardium", back: "Thick, fibrous membrane that surrounds the heart (pericardial sac)" },
                { front: "Endocardium", back: "Smooth inner lining of the heart chambers and valve surfaces" },
                { front: "SA Node", back: "Sinoatrial node - the heart's natural pacemaker (60-100 bpm)" },
                { front: "AV Node", back: "Atrioventricular node - backup pacemaker (40-60 bpm)" },
                { front: "Systole", back: "Contraction phase - ventricles pump blood into circulation" },
                { front: "Diastole", back: "Relaxation phase - heart fills with blood" },
                { front: "Preload", back: "Amount of blood returned to the heart to be pumped out" },
                { front: "Afterload", back: "Pressure in aorta/peripheral resistance the heart must pump against" },
                { front: "Stroke Volume", back: "Amount of blood ejected per contraction" },
                { front: "ACS", back: "Acute Coronary Syndrome - any symptoms of acute myocardial ischemia" },
                { front: "Angina Pectoris", back: "Brief chest pain from temporary lack of oxygen to heart tissue" },
                { front: "AMI", back: "Acute Myocardial Infarction - death of heart cells from blocked blood flow" },
                { front: "Atherosclerosis", back: "Buildup of cholesterol and fatty plaques in arterial walls" },
                { front: "OPQRST", back: "Onset, Provocation, Quality, Region, Severity, Timing - pain assessment" },
                { front: "VF", back: "Ventricular Fibrillation - chaotic, lethal rhythm requiring defibrillation" },
                { front: "VT", back: "Ventricular Tachycardia - rapid ventricular rhythm (may be pulseless)" },
                { front: "PVC", back: "Premature Ventricular Contraction - early beat from ventricles" },
                { front: "ROSC", back: "Return of Spontaneous Circulation - restoration of pulse after arrest" },
                { front: "Cardiogenic Shock", back: "Inadequate perfusion due to heart's inability to pump effectively" }
            ];

            // Matching pairs
            const matchingPairs = [
                { id: 1, term: "SA Node", match: "Natural pacemaker 60-100 bpm", matched: false },
                { id: 2, term: "Stroke Volume", match: "Blood ejected per contraction", matched: false },
                { id: 3, term: "Angina", match: "Brief chest pain, relieved by rest", matched: false },
                { id: 4, term: "AMI", match: "Heart attack - cell death", matched: false },
                { id: 5, term: "VF", match: "Requires defibrillation", matched: false },
                { id: 6, term: "Preload", match: "Blood returned to heart", matched: false }
            ];

            const [matchingGame, setMatchingGame] = useState({
                pairs: [...matchingPairs],
                selected: [],
                matched: 0
            });

            // Quiz handlers
            const handleAnswer = (index) => {
                if (showFeedback) return;
                setSelectedAnswer(index);
                setShowFeedback(true);
                
                if (index === quizQuestions[currentQuestion].correct) {
                    setScore(score + 1);
                    setGameScore({ correct: gameScore.correct + 1, total: gameScore.total + 1 });
                } else {
                    setGameScore({ ...gameScore, total: gameScore.total + 1 });
                }
            };

            const nextQuestion = () => {
                if (currentQuestion < quizQuestions.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                    setSelectedAnswer(null);
                    setShowFeedback(false);
                } else {
                    setCurrentMode('results');
                }
            };

            const resetQuiz = () => {
                setCurrentQuestion(0);
                setScore(0);
                setSelectedAnswer(null);
                setShowFeedback(false);
                setGameScore({ correct: 0, total: 0 });
            };

            // Flashcard handlers
            const nextCard = () => {
                setIsFlipped(false);
                setCurrentCard((currentCard + 1) % flashcards.length);
            };

            const prevCard = () => {
                setIsFlipped(false);
                setCurrentCard((currentCard - 1 + flashcards.length) % flashcards.length);
            };

            // Matching game handlers
            const handleMatchClick = (item, type) => {
                const newSelected = [...matchingGame.selected];
                
                if (newSelected.length === 0) {
                    newSelected.push({ item, type });
                    setMatchingGame({ ...matchingGame, selected: newSelected });
                } else if (newSelected.length === 1) {
                    newSelected.push({ item, type });
                    
                    const [first, second] = newSelected;
                    if (first.type !== second.type) {
                        if ((first.type === 'term' && first.item.match === second.item.match) ||
                            (first.type === 'match' && second.item.match === first.item.match) ||
                            (first.item.term === second.item.term)) {
                            
                            const newPairs = matchingGame.pairs.map(p => {
                                if (p.id === first.item.id || p.id === second.item.id) {
                                    return { ...p, matched: true };
                                }
                                return p;
                            });
                            
                            setMatchingGame({
                                pairs: newPairs,
                                selected: [],
                                matched: matchingGame.matched + 1
                            });
                        } else {
                            setTimeout(() => {
                                setMatchingGame({ ...matchingGame, selected: [] });
                            }, 1000);
                        }
                    } else {
                        setMatchingGame({ ...matchingGame, selected: [newSelected[1]] });
                    }
                }
            };

            const resetMatching = () => {
                setMatchingGame({
                    pairs: matchingPairs.map(p => ({ ...p, matched: false })),
                    selected: [],
                    matched: 0
                });
            };

            // Menu screen
            if (currentMode === 'menu') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-red-500 via-pink-500 to-purple-600 p-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="text-center mb-12 animate-fade-in">
                                <Heart className="inline-block text-white mb-4 animate-pulse" size={64} />
                                <h1 className="text-5xl font-bold text-white mb-4">Cardiovascular Emergencies</h1>
                                <p className="text-xl text-white/90">Interactive Learning Experience</p>
                                <div className="mt-4 bg-white/20 backdrop-blur-sm rounded-lg p-4 inline-block">
                                    <Star className="inline text-yellow-300" size={24} />
                                    <span className="text-white font-bold ml-2">Chapter 18 - AEMT Training</span>
                                </div>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div onClick={() => { resetQuiz(); setCurrentMode('quiz'); }} className="bg-white rounded-2xl p-8 cursor-pointer transform hover:scale-105 transition-all hover:shadow-2xl">
                                    <div className="text-center">
                                        <Brain className="inline-block text-blue-600 mb-4" size={56} />
                                        <h2 className="text-2xl font-bold text-gray-800 mb-2">Knowledge Quiz</h2>
                                        <p className="text-gray-600 mb-4">Test your understanding with comprehensive questions</p>
                                        <div className="bg-blue-50 rounded-lg p-3">
                                            <span className="text-blue-600 font-bold">{quizQuestions.length} Questions</span>
                                        </div>
                                    </div>
                                </div>

                                <div onClick={() => { setCurrentCard(0); setIsFlipped(false); setCurrentMode('flashcards'); }} className="bg-white rounded-2xl p-8 cursor-pointer transform hover:scale-105 transition-all hover:shadow-2xl">
                                    <div className="text-center">
                                        <BookOpen className="inline-block text-green-600 mb-4" size={56} />
                                        <h2 className="text-2xl font-bold text-gray-800 mb-2">Flashcards</h2>
                                        <p className="text-gray-600 mb-4">Master key terms and definitions</p>
                                        <div className="bg-green-50 rounded-lg p-3">
                                            <span className="text-green-600 font-bold">{flashcards.length} Cards</span>
                                        </div>
                                    </div>
                                </div>

                                <div onClick={() => { resetMatching(); setCurrentMode('matching'); }} className="bg-white rounded-2xl p-8 cursor-pointer transform hover:scale-105 transition-all hover:shadow-2xl">
                                    <div className="text-center">
                                        <Gamepad2 className="inline-block text-purple-600 mb-4" size={56} />
                                        <h2 className="text-2xl font-bold text-gray-800 mb-2">Matching Game</h2>
                                        <p className="text-gray-600 mb-4">Match terms with their definitions</p>
                                        <div className="bg-purple-50 rounded-lg p-3">
                                            <span className="text-purple-600 font-bold">{matchingPairs.length} Pairs</span>
                                        </div>
                                    </div>
                                </div>

                                <div onClick={() => { setAnimationPlay(false); setCurrentMode('animation'); }} className="bg-white rounded-2xl p-8 cursor-pointer transform hover:scale-105 transition-all hover:shadow-2xl">
                                    <div className="text-center">
                                        <Zap className="inline-block text-red-600 mb-4" size={56} />
                                        <h2 className="text-2xl font-bold text-gray-800 mb-2">Blood Flow Animation</h2>
                                        <p className="text-gray-600 mb-4">Visualize cardiac circulation</p>
                                        <div className="bg-red-50 rounded-lg p-3">
                                            <span className="text-red-600 font-bold">Interactive Demo</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {gameScore.total > 0 && (
                                <div className="mt-8 bg-white/20 backdrop-blur-sm rounded-2xl p-6 text-center">
                                    <Trophy className="inline-block text-yellow-300 mb-2" size={40} />
                                    <h3 className="text-2xl font-bold text-white mb-2">Your Progress</h3>
                                    <div className="flex justify-center gap-8">
                                        <div>
                                            <div className="text-4xl font-bold text-white">{gameScore.correct}</div>
                                            <div className="text-white/80">Correct</div>
                                        </div>
                                        <div>
                                            <div className="text-4xl font-bold text-white">{gameScore.total}</div>
                                            <div className="text-white/80">Total</div>
                                        </div>
                                        <div>
                                            <div className="text-4xl font-bold text-white">{Math.round((gameScore.correct / gameScore.total) * 100)}%</div>
                                            <div className="text-white/80">Accuracy</div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            // Quiz mode
            if (currentMode === 'quiz') {
                const question = quizQuestions[currentQuestion];
                const progress = ((currentQuestion + 1) / quizQuestions.length) * 100;

                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-2xl p-6 mb-6">
                                <div className="flex justify-between items-center mb-4">
                                    <button onClick={() => setCurrentMode('menu')} className="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-bold transition-all">← Back to Menu</button>
                                    <div className="text-right">
                                        <div className="text-2xl font-bold text-gray-800">Question {currentQuestion + 1} of {quizQuestions.length}</div>
                                        <div className="text-blue-600 font-bold">Score: {score}</div>
                                    </div>
                                </div>
                                <div className="bg-gray-200 rounded-full h-3 overflow-hidden">
                                    <div className="bg-gradient-to-r from-blue-500 to-purple-600 h-full transition-all duration-500" style={{ width: `${progress}%` }}></div>
                                </div>
                            </div>

                            <div className="bg-white rounded-2xl p-8 shadow-2xl">
                                <h2 className="text-2xl font-bold text-gray-800 mb-6">{question.question}</h2>
                                <div className="space-y-4">
                                    {question.options.map((option, index) => {
                                        const isCorrect = index === question.correct;
                                        const isSelected = selectedAnswer === index;
                                        let buttonClass = "w-full p-4 rounded-xl text-left font-bold transition-all transform hover:scale-102 ";
                                        if (!showFeedback) {
                                            buttonClass += "bg-gray-100 hover:bg-blue-100 text-gray-800 border-2 border-gray-300 hover:border-blue-400";
                                        } else if (isSelected && isCorrect) {
                                            buttonClass += "bg-green-500 text-white border-2 border-green-600 shadow-lg";
                                        } else if (isSelected && !isCorrect) {
                                            buttonClass += "bg-red-500 text-white border-2 border-red-600 shadow-lg";
                                        } else if (isCorrect) {
                                            buttonClass += "bg-green-100 text-green-800 border-2 border-green-400";
                                        } else {
                                            buttonClass += "bg-gray-100 text-gray-600 border-2 border-gray-300";
                                        }
                                        return (
                                            <button key={index} onClick={() => handleAnswer(index)} disabled={showFeedback} className={buttonClass}>
                                                <div className="flex items-center justify-between">
                                                    <span>{option}</span>
                                                    {showFeedback && isSelected && (isCorrect ? <CheckCircle className="text-white" size={24} /> : <XCircle className="text-white" size={24} />)}
                                                    {showFeedback && isCorrect && !isSelected && <CheckCircle className="text-green-600" size={24} />}
                                                </div>
                                            </button>
                                        );
                                    })}
                                </div>

                                {showFeedback && (
                                    <div className={`mt-6 p-6 rounded-xl ${selectedAnswer === question.correct ? 'bg-green-50 border-2 border-green-400' : 'bg-red-50 border-2 border-red-400'}`}>
                                        <div className="flex items-start gap-3">
                                            {selectedAnswer === question.correct ? <CheckCircle className="text-green-600 flex-shrink-0 mt-1" size={24} /> : <XCircle className="text-red-600 flex-shrink-0 mt-1" size={24} />}
                                            <div>
                                                <div className={`font-bold text-lg mb-2 ${selectedAnswer === question.correct ? 'text-green-800' : 'text-red-800'}`}>
                                                    {selectedAnswer === question.correct ? 'Correct!' : 'Incorrect'}
                                                </div>
                                                <div className="text-gray-700">{question.explanation}</div>
                                            </div>
                                        </div>
                                        <button onClick={nextQuestion} className="mt-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-8 py-3 rounded-full font-bold hover:shadow-lg transform hover:scale-105 transition-all w-full">
                                            {currentQuestion < quizQuestions.length - 1 ? 'Next Question →' : 'View Results →'}
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            // Results screen
            if (currentMode === 'results') {
                const percentage = Math.round((score / quizQuestions.length) * 100);
                let grade, message, color;
                if (percentage >= 90) {
                    grade = "A"; message = "Outstanding! You've mastered cardiovascular emergencies!"; color = "from-green-500 to-emerald-600";
                } else if (percentage >= 80) {
                    grade = "B"; message = "Great job! You have a solid understanding!"; color = "from-blue-500 to-cyan-600";
                } else if (percentage >= 70) {
                    grade = "C"; message = "Good effort! Review the material to improve."; color = "from-yellow-500 to-orange-600";
                } else {
                    grade = "D"; message = "Keep studying! Review the material and try again."; color = "from-orange-500 to-red-600";
                }

                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-500 to-pink-600 p-8 flex items-center justify-center">
                        <div className="max-w-2xl w-full">
                            <div className="bg-white rounded-3xl p-12 shadow-2xl text-center">
                                <Trophy className="inline-block text-yellow-500 mb-6 animate-bounce" size={80} />
                                <h1 className="text-4xl font-bold text-gray-800 mb-4">Quiz Complete!</h1>
                                <div className={`bg-gradient-to-r ${color} rounded-2xl p-8 mb-6`}>
                                    <div className="text-8xl font-bold text-white mb-2">{grade}</div>
                                    <div className="text-3xl font-bold text-white mb-2">{percentage}%</div>
                                    <div className="text-xl text-white">{score} out of {quizQuestions.length} correct</div>
                                </div>
                                <p className="text-xl text-gray-700 mb-8">{message}</p>
                                <div className="flex gap-4">
                                    <button onClick={() => { resetQuiz(); setCurrentMode('quiz'); }} className="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-105 transition-all">
                                        <RefreshCw className="inline mr-2" size={20} />Try Again
                                    </button>
                                    <button onClick={() => setCurrentMode('menu')} className="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-4 rounded-xl font-bold transition-all">Back to Menu</button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // Flashcards mode
            if (currentMode === 'flashcards') {
                const card = flashcards[currentCard];
                return (
                    <div className="min-h-screen bg-gradient-to-br from-green-500 to-teal-600 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-2xl p-6 mb-6 flex justify-between items-center">
                                <button onClick={() => setCurrentMode('menu')} className="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-bold transition-all">← Back to Menu</button>
                                <div className="text-center"><div className="text-2xl font-bold text-gray-800">Card {currentCard + 1} of {flashcards.length}</div></div>
                                <div className="w-32"></div>
                            </div>

                            <div onClick={() => setIsFlipped(!isFlipped)} className="bg-white rounded-3xl p-12 shadow-2xl cursor-pointer transform hover:scale-102 transition-all min-h-96 flex items-center justify-center">
                                <div className="text-center">
                                    <div className="text-sm font-bold text-gray-400 mb-4">{isFlipped ? 'DEFINITION' : 'TERM'}</div>
                                    <div className="text-4xl font-bold text-gray-800 mb-6">{isFlipped ? card.back : card.front}</div>
                                    <div className="text-gray-500 italic">Click to flip</div>
                                </div>
                            </div>

                            <div className="flex justify-between items-center mt-6">
                                <button onClick={prevCard} className="bg-white hover:bg-gray-100 text-gray-800 px-8 py-4 rounded-xl font-bold transition-all shadow-lg">← Previous</button>
                                <div className="bg-white rounded-xl px-6 py-3 shadow-lg">
                                    <div className="flex gap-2">
                                        {flashcards.map((_, idx) => (
                                            <div key={idx} className={`w-2 h-2 rounded-full transition-all ${idx === currentCard ? 'bg-green-500 w-6' : 'bg-gray-300'}`}></div>
                                        ))}
                                    </div>
                                </div>
                                <button onClick={nextCard} className="bg-white hover:bg-gray-100 text-gray-800 px-8 py-4 rounded-xl font-bold transition-all shadow-lg">Next →</button>
                            </div>
                        </div>
                    </div>
                );
            }

            // Matching game
            if (currentMode === 'matching') {
                const allMatched = matchingGame.matched === matchingPairs.length;
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-500 to-indigo-600 p-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="bg-white rounded-2xl p-6 mb-6 flex justify-between items-center">
                                <button onClick={() => setCurrentMode('menu')} className="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-bold transition-all">← Back to Menu</button>
                                <div className="text-center">
                                    <div className="text-2xl font-bold text-gray-800">Match the Pairs!</div>
                                    <div className="text-purple-600 font-bold">{matchingGame.matched} of {matchingPairs.length} matched</div>
                                </div>
                                <button onClick={resetMatching} className="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-bold transition-all">
                                    <RefreshCw className="inline mr-2" size={16} />Reset
                                </button>
                            </div>

                            {allMatched ? (
                                <div className="bg-white rounded-3xl p-12 shadow-2xl text-center">
                                    <Trophy className="inline-block text-yellow-500 mb-6 animate-bounce" size={80} />
                                    <h2 className="text-4xl font-bold text-gray-800 mb-4">Congratulations!</h2>
                                    <p className="text-xl text-gray-600 mb-8">You've matched all pairs correctly!</p>
                                    <button onClick={resetMatching} className="bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-8 py-4 rounded-xl font-bold hover:shadow-lg transform hover:scale-105 transition-all">
                                        <RefreshCw className="inline mr-2" size={20} />Play Again
                                    </button>
                                </div>
                            ) : (
                                <div className="grid grid-cols-2 gap-8">
                                    <div className="space-y-4">
                                        <h3 className="text-2xl font-bold text-white mb-4 text-center">Terms</h3>
                                        {matchingGame.pairs.map((pair) => {
                                            const isSelected = matchingGame.selected.some(s => s.item.id === pair.id && s.type === 'term');
                                            const isMatched = pair.matched;
                                            return (
                                                <button key={`term-${pair.id}`} onClick={() => !isMatched && handleMatchClick(pair, 'term')} disabled={isMatched}
                                                    className={`w-full p-6 rounded-xl font-bold text-lg transition-all transform hover:scale-105 ${
                                                        isMatched ? 'bg-green-500 text-white opacity-50 cursor-not-allowed' :
                                                        isSelected ? 'bg-yellow-400 text-gray-800 shadow-lg scale-105' :
                                                        'bg-white text-gray-800 hover:bg-purple-100'
                                                    }`}>
                                                    {pair.term}
                                                    {isMatched && <CheckCircle className="inline ml-2" size={20} />}
                                                </button>
                                            );
                                        })}
                                    </div>
                                    <div className="space-y-4">
                                        <h3 className="text-2xl font-bold text-white mb-4 text-center">Definitions</h3>
                                        {[...matchingGame.pairs].sort(() => Math.random() - 0.5).map((pair) => {
                                            const isSelected = matchingGame.selected.some(s => s.item.id === pair.id && s.type === 'match');
                                            const isMatched = pair.matched;
                                            return (
                                                <button key={`match-${pair.id}`} onClick={() => !isMatched && handleMatchClick(pair, 'match')} disabled={isMatched}
                                                    className={`w-full p-6 rounded-xl font-bold text-lg transition-all transform hover:scale-105 ${
                                                        isMatched ? 'bg-green-500 text-white opacity-50 cursor-not-allowed' :
                                                        isSelected ? 'bg-yellow-400 text-gray-800 shadow-lg scale-105' :
                                                        'bg-white text-gray-800 hover:bg-indigo-100'
                                                    }`}>
                                                    {pair.match}
                                                    {isMatched && <CheckCircle className="inline ml-2" size={20} />}
                                                </button>
                                            );
                                        })}
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            // Animation mode
            if (currentMode === 'animation') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-red-500 to-blue-600 p-8">
                        <div className="max-w-6xl mx-auto">
                            <div className="bg-white rounded-2xl p-6 mb-6 flex justify-between items-center">
                                <button onClick={() => setCurrentMode('menu')} className="bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded-lg font-bold transition-all">← Back to Menu</button>
                                <div className="text-2xl font-bold text-gray-800">Blood Flow Animation</div>
                                <div className="w-32"></div>
                            </div>

                            <div className="bg-gradient-to-br from-red-50 to-blue-50 p-8 rounded-2xl">
                                <h3 className="text-2xl font-bold text-center mb-6 text-gray-800">Blood Flow Through the Heart</h3>
                                <div className="relative max-w-2xl mx-auto h-96">
                                    <div className="absolute top-0 left-1/2 transform -translate-x-1/2 w-64 h-80 bg-gradient-to-br from-red-200 to-red-400 rounded-full opacity-30"></div>
                                    
                                    <div className={`absolute top-10 left-10 transition-all duration-1000 ${animationPlay ? 'opacity-100' : 'opacity-0'}`}>
                                        <div className="bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg animate-pulse">
                                            <div className="font-bold">Deoxygenated Blood</div>
                                            <div className="text-sm">Superior/Inferior Vena Cava → Right Atrium</div>
                                        </div>
                                    </div>
                                    
                                    <div className={`absolute top-32 left-8 transition-all duration-1000 delay-300 ${animationPlay ? 'opacity-100' : 'opacity-0'}`}>
                                        <div className="bg-blue-600 text-white px-4 py-2 rounded-lg shadow-lg animate-pulse">
                                            <div className="font-bold">Tricuspid Valve</div>
                                            <div className="text-sm">Right Atrium → Right Ventricle</div>
                                        </div>
                                    </div>
                                    
                                    <div className={`absolute top-56 left-16 transition-all duration-1000 delay-500 ${animationPlay ? 'opacity-100' : 'opacity-0'}`}>
                                        <div className="bg-purple-500 text-white px-4 py-2 rounded-lg shadow-lg animate-pulse">
                                            <div className="font-bold">Pulmonary Circulation</div>
                                            <div className="text-sm">Right Ventricle → Lungs (O₂ Exchange)</div>
                                        </div>
                                    </div>
                                    
                                    <div className={`absolute top-10 right-10 transition-all duration-1000 delay-700 ${animationPlay ? 'opacity-100' : 'opacity-0'}`}>
                                        <div className="bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg animate-pulse">
                                            <div className="font-bold">Oxygenated Blood</div>
                                            <div className="text-sm">Pulmonary Veins → Left Atrium</div>
                                        </div>
                                    </div>
                                    
                                    <div className={`absolute top-32 right-8 transition-all duration-1000 delay-1000 ${animationPlay ? 'opacity-100' : 'opacity-0'}`}>
                                        <div className="bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg animate-pulse">
                                            <div className="font-bold">Mitral Valve</div>
                                            <div className="text-sm">Left Atrium → Left Ventricle</div>
                                        </div>
                                    </div>
                                    
                                    <div className={`absolute top-56 right-16 transition-all duration-1000 delay-1200 ${animationPlay ? 'opacity-100' : 'opacity-0'}`}>
                                        <div className="bg-red-700 text-white px-4 py-2 rounded-lg shadow-lg animate-pulse">
                                            <div className="font-bold">Systemic Circulation</div>
                                            <div className="text-sm">Left Ventricle → Aorta → Body</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="text-center mt-8">
                                    <button onClick={() => setAnimationPlay(!animationPlay)} className="bg-gradient-to-r from-red-500 to-blue-500 text-white px-8 py-3 rounded-full font-bold hover:shadow-lg transform hover:scale-105 transition-all">
                                        <Play className="inline mr-2" size={20} />
                                        {animationPlay ? 'Reset Animation' : 'Play Animation'}
                                    </button>
                                </div>
                            </div>

                            <div className="mt-8 bg-white rounded-2xl p-8">
                                <h3 className="text-2xl font-bold text-gray-800 mb-6 text-center">Key Concepts</h3>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div className="bg-blue-50 p-6 rounded-xl border-2 border-blue-200">
                                        <h4 className="font-bold text-lg text-blue-800 mb-2">Deoxygenated Blood Path</h4>
                                        <p className="text-gray-700">Body → Vena Cava → Right Atrium → Right Ventricle → Pulmonary Artery → Lungs</p>
                                    </div>
                                    <div className="bg-red-50 p-6 rounded-xl border-2 border-red-200">
                                        <h4 className="font-bold text-lg text-red-800 mb-2">Oxygenated Blood Path</h4>
                                        <p className="text-gray-700">Lungs → Pulmonary Veins → Left Atrium → Left Ventricle → Aorta → Body</p>
                                    </div>
                                    <div className="bg-purple-50 p-6 rounded-xl border-2 border-purple-200">
                                        <h4 className="font-bold text-lg text-purple-800 mb-2">Cardiac Cycle</h4>
                                        <p className="text-gray-700"><strong>Systole:</strong> Ventricles contract and pump blood. <strong>Diastole:</strong> Heart relaxes and fills with blood.</p>
                                    </div>
                                    <div className="bg-green-50 p-6 rounded-xl border-2 border-green-200">
                                        <h4 className="font-bold text-lg text-green-800 mb-2">Cardiac Output</h4>
                                        <p className="text-gray-700">CO = Stroke Volume × Heart Rate. The amount of blood pumped per minute.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return null;
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CardiovascularLearning />);
    </script>
</body>
</html>